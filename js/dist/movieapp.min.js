function Movie(){this.id=-1,this.name="",this.date=new Date,this.rating="0.0",this.imdb="0.00",this.runtime=-1,this.year="9999",this.genre="",this.medium="",this.favorite=!1}function MovieList(){this.movies=[],this.ratingOptions=[],this.genreOptions=[]}!function(){angular.module("movieApp",["ui.bootstrap","angularUtils.directives.dirPagination"])}(),function(){function e(e,t,i,n){var r=t("orderBy"),o=0;e.movieList={},e.showDetails=!1,e.showFavoritesOnly=!1,e.filterRating="ANY",e.filterGenre="ALL",e.searchQuery="",e.refresh=function(){n.getData().then(function(t){e.movieList=movieUtil.parse(t),e.loaded=!0})},e.search=function(t){var i=e.searchQuery.toLowerCase();return t.name.toLowerCase().indexOf(i)>-1?!0:!1},e.order=function(t){e.sortReverse=e.sortColumn===t?!e.sortReverse:!1,e.movieList.movies=r(e.movieList.movies,t,e.sortReverse),e.sortColumn=t},e.toggleDetails=function(){e.showDetails=!e.showDetails},e.clearQuery=function(){e.searchQuery=""},e.setFilterRating=function(t){e.filterRating=t},e.setFilterGenre=function(t){e.filterGenre=t},e.toggleFavorite=function(t){t.toggleFavorite(),o=t.favorite===!0?o+1:o-1,0>=o&&e.showFavoritesOnly&&(e.showFavoritesOnly=!1)},e.toggleShowFavoritesOnly=function(){e.showFavoritesOnly=!e.showFavoritesOnly},e.searchRT=function(e){var t="http://www.rottentomatoes.com/search/?search=%SEARCH_TERM%",i=window.open(t.replace("%SEARCH_TERM%",e),"_blank");i.focus()},e.searchIMDB=function(e){var t="http://www.imdb.com/find?ref_=nv_sr_fn&q=%SEARCH_TERM%&s=all",i=window.open(t.replace("%SEARCH_TERM%",e),"_blank");i.focus()},e.init=function(){e.refresh(),e.order("date",!1)},e.init()}angular.module("movieApp").controller("movieCtrl",["$scope","$filter","$http","dataService",e])}(),function(){angular.module("movieApp").directive("movieNav",function(){return{restrict:"E",templateUrl:"template/nav.html"}}),angular.module("movieApp").directive("movieActions",function(){return{restrict:"E",templateUrl:"template/actions.html"}}),angular.module("movieApp").directive("pageHeader",function(){return{restrict:"E",templateUrl:"template/header.html"}}),angular.module("movieApp").directive("pageFooter",function(){return{restrict:"E",templateUrl:"template/footer.html"}})}(),function(){angular.module("movieApp").filter("favorite",function(){return function(e,t){if(t){var i=[];return angular.forEach(e,function(e){e.favorite&&i.push(e)}),i}return e}}),angular.module("movieApp").filter("rating",function(){return function(e,t){if("ANY"==t)return e;var i=[];return angular.forEach(e,function(e){e.rating==t&&i.push(e)}),i}}),angular.module("movieApp").filter("genre",function(){return function(e,t){if("ALL"==t)return e;var i=[];return angular.forEach(e,function(e){e.genre==t&&i.push(e)}),i}})}();var movieUtil=function(){function e(e){for(var i=new MovieList,n=e.feed.entry,r=0;r<n.length;r++){var o=n[r].content.$t,s=t(o);s.id=r+1,i.addMovie(s)}return i.loadRatingOptions(),i.loadGenreOptions(),i}function t(e){var t,f,v=new Movie;t=e.indexOf(i)+6,f=e.indexOf(n)-2;var c=e.substring(t,f);if(v.date=new Date(c.substring(0,4),c.substring(5,7)-1,c.substring(8,10)),t=e.indexOf(n)+9,f=e.indexOf(r)-2,v.name=e.substring(t,f),t=e.indexOf(r)+11,f=e.indexOf(o)-2,v.rating=e.substring(t,f),t=e.indexOf(o)+9,f=e.indexOf(s)-2,v.imdb=e.substring(t,f),t=e.indexOf(s)+9,f=e.indexOf(a)-2,v.runtime=parseInt(e.substring(t,f)),t=e.indexOf(a)+6,f=e.indexOf(u)-2,v.year=e.substring(t,f),t=e.indexOf(u)+10,f=e.indexOf(l)-2,v.genre=e.substring(t,f),t=e.indexOf(l)+10,-1==e.substring(t).indexOf(","))v.medium=e.substring(t);else{var g=e.substring(t);v.medium=g.substring(0,g.indexOf(","))}return v}var i="date:",n="movie_2:",r="rating0-5:",o="imdb0-5:",s="runtime:",a="year:",u="category:",l="viewedon:";return{parse:e}}();Movie.prototype.toggleFavorite=function(){this.favorite=!this.favorite};try{module.exports=Movie}catch(e){}MovieList.prototype.addMovie=function(e){this.movies.push(e)},MovieList.prototype.clear=function(){this.clearMovies(),this.clearRatings(),this.clearGenres()},MovieList.prototype.clearMovies=function(){this.movies=[]},MovieList.prototype.clearRatings=function(){this.ratingOptions=[]},MovieList.prototype.clearGenres=function(){this.genreOptions=[]},MovieList.prototype.getDefaultRatingOption=function(){return{id:"ANY",label:"Any Rating"}},MovieList.prototype.loadRatingOptions=function(){this.clearRatings();for(var e=[],t=[],i=0;i<this.movies.length;i++)-1==e.indexOf(this.movies[i].rating)&&e.push(this.movies[i].rating),t[this.movies[i].rating]=t[this.movies[i].rating]?t[this.movies[i].rating]+1:1;e.sort().reverse();for(var n=0;n<e.length;n++){var r={id:e[n],label:e[n]+" Stars ("+t[e[n]]+")"};this.ratingOptions.push(r)}this.ratingOptions.unshift(this.getDefaultRatingOption())},MovieList.prototype.getDefaultGenreOption=function(){return{id:"ALL",label:"All"}},MovieList.prototype.loadGenreOptions=function(){this.clearGenres();for(var e=[],t=[],i=0;i<this.movies.length;i++)-1==e.indexOf(this.movies[i].genre)&&e.push(this.movies[i].genre),t[this.movies[i].genre]=t[this.movies[i].genre]?t[this.movies[i].genre]+1:1;e.sort();for(var n=0;n<e.length;n++){var r={id:e[n],label:e[n]+" ("+t[e[n]]+")"};this.genreOptions.push(r)}this.genreOptions.unshift(this.getDefaultGenreOption())};try{module.exports=MovieList}catch(e){}!function(){angular.module("movieApp").factory("dataService",function(e){function t(){return e.get(i).then(function(e){return e.data})}var i="https://spreadsheets.google.com/feeds/list/1WfPJ5pDCYsh8wq0f3so7kFtbW3UT4-OpSvI2t027zXk/o1a66w7/public/basic?alt=json";return{getData:t}})}();